/*
SCRIPT: slider.min.js
AUTHOR: Michael Manning 2013
*/
!function(a){a.fn.slider=function(b){function u(){a.ajax({url:"/success/ajax.php",async:!1,cache:!1,data:{path:a(c).data("images"),action:"getImagesFromDir"},type:"POST",timeout:i,success:function(b){b=a.parseJSON(b),void 0!==b.errorMsg?(console.log("Error has occured in ajax.php\nError Message: "+b.errorMsg),t=!0):a(c).data("images",b)}})}function v(b){var d=f;a(c).stop(!0,!0),b&&(clearTimeout(s),d=f+h),s=setTimeout(function(){a(c).data("position")>=a(c).data("images").length-1?a(c).data("position",0):a(c).data("position",a(c).data("position")+1),y(),v(!1)},d)}function w(){a(c).find(".slider-link").css({"background-color":"rgba(0,0,0, 0.25)",border:"1px solid rgba(255,255,255, 0.25)"}).setDisabled(!1),a(c).find("#slider-link-"+a(c).data("position")).css({"background-color":"#000",border:"1px solid #FFF"}).setDisabled(!0)}function x(){if(null!=p){var b="";"undefined"!=typeof p[a(c).data("position")]&&(b=p[a(c).data("position")]),a(c).find("#slider-captions-container").html(b).css({left:j/2-a(c).find("#slider-captions-container").width()/2})}}function y(){w(),x();var b=a(c).find(".slider-image");a(b).fadeOut(g),setTimeout(function(){a(b).remove()},2*g),a("<img />").attr({id:"slider-image-"+a(c).data("position"),"class":"slider-image",src:d+a(c).data("images")[a(c).data("position")],alt:a(c).data("position"),width:j,height:k}).css({position:"absolute",top:0,left:0,"z-index":-1}).appendTo(c).hide().fadeIn(g)}function z(){if(a(c).data("position",0).html("").addClass("slider-container").css({position:"relative",width:j,height:k}),a("<img />").attr({id:"slider-image-0","class":"slider-image",src:d+a(c).data("images")[a(c).data("position")],alt:a(c).data("position"),width:j,height:k}).css({position:"absolute",top:0,left:0}).appendTo(c),n&&(a("<button />").attr({id:"slider-left","class":"slider-nav slider-step"}).css({position:"absolute",top:k-l-e,left:e,width:l,height:l,color:"#FFF","font-size":35,"background-color":"rgba(0,0,0,0.25)",border:"none","text-align":"center"}).html("&#9668;").appendTo(c).hide(),a("<button />").attr({id:"slider-right","class":"slider-nav slider-step"}).css({position:"absolute",top:k-l-e,left:j-l-e,width:l,height:l,color:"#FFF","font-size":35,"background-color":"rgba(0,0,0,0.25)",border:"none","text-align":"center"}).html("&#9658;").appendTo(c).hide()),null!=p&&a("<span />").attr({id:"slider-captions-container","class":"slider-nav"}).css({position:"absolute",top:"90%",color:"#FFF","text-align":"center"}).appendTo(c).hide(),x(),a("<div />").attr({id:"slider-link-container","class":"slider-nav"}).css({position:"absolute",top:k-40,left:j*m-(20*a(c).data("images").length+a(c).data("images").length*e),padding:e}).appendTo(c).hide(),o)for(var b=a(c).data("images").length-1;b>=0;b--)a("<button />").attr({id:"slider-link-"+(a(c).data("images").length-b-1),"class":"slider-link"}).data("target",a(c).data("images").length-b-1).html("&nbsp;").appendTo(a(c).find("#slider-link-container"))}"undefined"==typeof b&&(b={});var c=a(this),d="undefined"!=typeof b.root?b.root:"http://www.montana.edu/success/",e="undefined"!=typeof b.pad?b.pad:5,f="undefined"!=typeof b.delay?b.delay:6e3,g="undefined"!=typeof b.transition?b.transition:500,h="undefined"!=typeof b.changeDelay?b.changeDelay:4e3,i="undefined"!=typeof b.ajaxTimeout?i:3e3,j="undefined"!=typeof b.w?b.w:750,k="undefined"!=typeof b.h?b.h:300,l="undefined"!=typeof b.stepSize?b.stepSize:78,m="undefined"!=typeof b.p?b.p:.88,n="undefined"!=typeof b.haveStep?b.haveStep:!0,o="undefined"!=typeof b.haveLinks?b.haveLinks:!0,p="undefined"!=typeof b.captions?b.captions:null,q="undefined"!=typeof b.imageLinks?b.imageLinks:null;"undefined"!=typeof b.errorMsg?b.errorMsg:"<p>There has been an error.<br />Please check path provided. Error message returned in console.</p>";var s,t=!1;return u(),t?!1:(z(),w(),v(!1),a("head").append("<style>.slider button:focus{outline:none}</style>"),a(document).ready(function(a){a(c).on("mouseenter",function(){a(c).find(".slider-nav").stop(!0,!0).fadeIn()}),a(c).on("mouseleave",function(){a(c).find(".slider-nav").stop(!0,!0).fadeOut()}),a(c).on("click",a(c).find(".slider-image"),function(){null!=q&&"undefined"!=typeof q[a(c).data("position")]&&(window.location.href=q[a(c).data("position")])}),a(c).find("#slider-left").on("click",function(b){b.stopImmediatePropagation(),a(c).data("position")<=0?a(c).data("position",a(c).data("images").length-1):a(c).data("position",a(c).data("position")-1),y(),v(!0)}),a(c).find("#slider-right").on("click",function(b){b.stopImmediatePropagation(),a(c).data("position")>=a(c).data("images").length-1?a(c).data("position",0):a(c).data("position",a(c).data("position")+1),y(),v(!0)}),a(c).find(".slider-link").on("click",function(b){b.stopImmediatePropagation(),a(c).data("position",a(c).find(this).data("target")),y(),v(!0)})}),void 0)},a.fn.setDisabled=function(a){return this.each(function(){this.disabled=a})}}(jQuery);